CREATE TABLE "mytable" (
  "1. Связь данных с крепостью: Обходной путь vs. Прямая связь" text NULL
);

INSERT INTO "mytable" ("1. Связь данных с крепостью: Обходной путь vs. Прямая связь")
VALUES
('Проблема: Исходная схема не имела очевидной связи между атакой (в локации) и крепостью.'),
('Мое решение:'),
('Пришлось конструировать сложный "мост" для установления связи'),
('-- Пример из моего решения:'),
('WITH FortressLocations_CTE AS ('),
('-- Путь через тренировки'),
('SELECT ms.fortress_id'),
('UNION'),
('-- Путь через проекты'),
('SELECT w.fortress_id'),
('UNION'),
('-- Путь через военные посты'),
('SELECT ms.fortress_id'),
(')'),
('Эталонное решение:'),
('Предполагает'),
('-- Пример из эталонного решения:'),
('FROM locations l'),
('LEFT JOIN creature_attacks ca ON l.zone_id = ca.location_id -- Предполагает'),
('-- Эталон не тратит усилия на обходные пути'),
('2. Глубина анализа: Расчет эвристик'),
('Проблема: Как оценить боеготовность отряда?'),
('Мое решение (Простая эвристика):'),
('Формула основана на 2-3 легкодоступных параметрах: средний навык'),
('-- Пример из моего решения:'),
('readiness_score = ( (AVG(ds.level) / 20.0) * 0.5 + (AVG(de.quality) / 10.0) * 0.3 + (AVG(...) * 0.2) )'),
('Эталонное решение (Комплексная эвристика):'),
('Формула включает 4 взвешенных компонента'),
('-- Пример из эталонного решения:'),
('combat_effectiveness = ROUND('),
('(mr.successful_defenses / NULLIF(mr.battles_participated'),
('(mr.avg_combat_skill / 10 * 0.3) +                                -- Навык'),
('(mr.avg_equipment_quality / 5 * 0.2) +                            -- Снаряжение'),
('(CASE WHEN mr.days_since_training < 7 THEN 1.0 ... END * 0.1)     -- Свежесть тренировок'),
(NULL),
('3. Широта анализа: Вторичные факторы'),
('Проблема: Какие еще факторы влияют на безопасность?'),
('Мое решение:'),
('Анализ ограничен данными из предоставленной схемы. Внешние факторы'),
('Эталонное решение:'),
('Включает в анализ данные из таблиц'),
('-- Пример из эталонного решения:'),
('-- Присоединение данных о погоде и фазах луны'),
('FROM creature_attacks ca'),
('...'),
('JOIN weather_records w ON DATE_TRUNC(''day'''),
('JOIN moon_phases mp ON DATE_TRUNC(''day'''),
('...'),
('-- Расчет корреляции'),
('SELECT CORR(sap.attack_count'),
('Мое решение не содержит подобных JOIN-ов и расчетов'),
('4. Структура итогового вывода: Агрегация по крепостям vs. Глобальный отчет'),
('Проблема: Как представить итоговый результат?'),
('Мое решение (Список по крепостям):'),
('-- Пример из моего решения:'),
('SELECT JSON_ARRAYAGG('),
('JSON_OBJECT( ''fortress_id'''),
('''vulnerability_analysis'''),
('...'),
(')'),
(')'),
('FROM FORTRESSES f ...'),
('Эталонное решение (Единый глобальный отчет):'),
('-- Пример из эталонного решения:'),
('SELECT'),
('...'),
('JSON_OBJECT('),
('''threat_assessment'''),
('''vulnerability_analysis'''),
('...'),
(')'),
('FROM (SELECT 1) AS dummy; -- Запрос не итерирует по крепостям');
